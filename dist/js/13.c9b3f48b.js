"use strict";(self["webpackChunkhello_world"]=self["webpackChunkhello_world"]||[]).push([[13],{7418:function(t,e,i){var s=i(9806);e["Z"]={inject:["emitter"],mixins:[s.Z],data(){return{qty:1,status:{loadingItem:""},productSize:""}},methods:{addToCart(t,e=1,i){if(this.isLogin)if(this.productSize){this.status.loadingItem=t,this.isLoading=!0;const s="https://vue3-course-api.hexschool.io/api/william-api/cart",a={product_id:t,qty:e};this.$http.post(s,{data:a}).then((t=>{this.isLoading=!1,this.status.loadingItem="",this.$httpMessageState(t,"加入購物車"),this.emitter.emit("customEvent_getCart",this.getCart),i&&(this.$router.push("/cart-view/cart-list"),this.emitter.emit("customEvent_getCart",this.getCart))}))}else this.$swal.fire("Please","Size must be selectd.","warning");else this.$swal.fire("Please"," Sign in or Sign up first.","warning"),this.$router.push("/login")}}}},6019:function(t,e,i){var s=i(9806);e["Z"]={inject:["emitter"],mixins:[s.Z],data(){return{isFavorite:!1,favoriteData:[],checkFavorite:!1}},created(){this.getFavoriteData();//! 用其他電腦，先新增本地陣列
},methods:{updateFavo(t){if(this.isLoading=!0,this.checkFavorite=Boolean(-1!==localStorage.getItem("favorite").indexOf(t)),this.checkFavorite){this.isFavorite=!1,this.emitter.emit("push-message",{style:"danger",title:"移除我的收藏"}),this.favoriteData=JSON.parse(localStorage.getItem("favorite"));const e=this.favoriteData.indexOf(t);e>-1&&(this.favoriteData.splice(e,1),localStorage.setItem("favorite",JSON.stringify(this.favoriteData))),this.isLoading=!1}else this.isFavorite=!0,this.emitter.emit("push-message",{style:"success",title:"加入我的收藏"}),this.favoriteData.push(t),localStorage.setItem("favorite",JSON.stringify(this.favoriteData));this.emitter.emit("customEvent_updateFavorite"),//! 觸發收藏表更新
this.isLoading=!1},getFavoriteData(){if(localStorage.getItem("favorite")){this.favoriteData=JSON.parse(localStorage.getItem("favorite"));const t=Boolean(-1!==JSON.parse(localStorage.getItem("favorite")).indexOf(this.id));this.isFavorite=!!t}else localStorage.setItem("favorite",JSON.stringify(this.favoriteData))}}}},2222:function(t,e,i){i.d(e,{Z:function(){return j}});var s=i(3396),a=i(9242),o=i(7139);const c=t=>((0,s.dD)("data-v-462d0e82"),t=t(),(0,s.Cn)(),t),r={class:""},l={class:"mb-3 d-flex justify-content-end align-items-center"},n=c((()=>(0,s._)("label",{for:"",class:"form-label mb-0"},"Sort by：",-1))),h=(0,s.uE)('<option class="fs-6" value="0" selected data-v-462d0e82>Relevance</option><option class="fs-6" value="AZ" data-v-462d0e82>Name - AZ</option><option class="fs-6" value="ZA" data-v-462d0e82>Name - ZA</option><option class="fs-6" value="Low" data-v-462d0e82>Price - Low to Height</option><option class="fs-6" value="Height" data-v-462d0e82>Price - Height to Low</option>',5),d=[h],u=c((()=>(0,s._)("hr",{class:"py-3"},null,-1))),p={class:"row row-cols-2 row-cols-lg-5 g-4 mb-7",ref:"products_list"},g={class:"col overflow-hidden"},m={class:"card w-100 position-relation newproduct_img","data-num":"1"},f={class:"newproduct_cloth p-1"},v={class:"fw-light",style:{"font-size":"10px"}},_=["onClick"],y={class:"text-white text-center"},w={class:"position-relative border border-white rounded-1 px-2 py-3 bg-transparent d-flex justify-content-around m-2"},C=["onClick"],L=["onClick"],S={key:0,class:"text-center d-flex align-items-center justify-content-center position-absolute top-0 start-0 end-0 bottom-0"},k=c((()=>(0,s._)("div",{class:"spinner-border text-primary",role:"status"},[(0,s._)("span",{class:"visually-hidden"},"Loading...")],-1))),b=[k],x=["src","alt"],D={class:"text-center"},E={class:"spinner-grow text-warning",role:"status"},F=c((()=>(0,s._)("span",{class:"visually-hidden"},"Loading...",-1))),P=[F];function $(t,e,i,c,h,k){return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",l,[n,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>h.selectSort=t),class:"form-select form-select-lg rounded-0 p-1 fs-6",style:{width:"250px"},name:"",id:""},d,512),[[a.bM,h.selectSort]])]),u,(0,s._)("div",p,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(k.filtersData,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"",key:e.id},[(0,s._)("div",g,[(0,s._)("div",m,[(0,s._)("div",f,[(0,s._)("h6",v,(0,o.zw)(e.category),1),(0,s._)("h5",{class:"fs-5 text-center",onClick:t=>k.getProduct(e.id)},(0,o.zw)(e.title),9,_),(0,s._)("h6",y," $ "+(0,o.zw)(t.$filters.currency(e.price)),1),(0,s._)("div",w,[(0,s._)("i",{onClick:i=>t.updateFavo(e.id),class:(0,o.C_)([{"text-danger":-1!==t.favoriteData.indexOf(e.id)},"fa fa-heart fs-4"])},null,10,C),(0,s._)("i",{onClick:i=>t.addToCart(e.id,t.qty,t.isBuy=!1),class:"fa fa-cart-plus text-white fs-4"},null,8,L),h.isLoading?((0,s.wg)(),(0,s.iD)("div",S,b)):(0,s.kq)("",!0)])]),(0,s._)("img",{"data-num":"1",height:"312",width:"312",class:"card-img of-cover op-top",src:e.imageUrl,alt:e.title},null,8,x)])])])))),128))],512),(0,s._)("div",D,[(0,s.wy)((0,s._)("div",E,P,512),[[a.F8,h.isLoading]])])])}i(6699);var Z=i(7418),I=i(6019),O={mixins:[Z.Z,I.Z],inject:["emitter"],data(){return{products:[],page:1,pagination:{},products_list:0,isLoading:!1,id:"",product:{},cacheSearch:"",cacheCategory:"",filterCheck:"",isFavorite:!1,selectSort:"0"}},mounted(){this.products_list=this.$refs.products_list.offsetHeight,//! 在mounted定義會是零，但不定義會在其他頁報錯
window.addEventListener("scroll",this.handleScroll),this.emitter.on("customEvent_search",(t=>{this.cacheSearch=t})),this.emitter.on("customEvent_category",(t=>{this.cacheCategory=t})),this.emitter.on("customEvent_Check",(t=>{this.filterCheck=t}))},created(){this.getProducts()},computed:{filtersData(){let t=[];this.isLoading_big=!0;try{if(this.$route.path.includes("products-content")){if(t=this.products.filter((t=>(!this.cacheSearch||t.title.toLowerCase().includes(this.cacheSearch.trim().toLowerCase()))&&(!this.cacheCategory||t.category.toLowerCase().includes(this.cacheCategory.trim().toLowerCase())))),0===t.length&&!this.cacheSearch)return this.products;const e={2999:t=>t.price<=2999,5e3:t=>t.price>=5e3,default:()=>!0}[this.filterCheck||"default"],i={Low:(t,e)=>t.price-e.price,Height:(t,e)=>e.price-t.price,AZ:(t,e)=>t.title.localeCompare(e.title),ZA:(t,e)=>e.title.localeCompare(t.title),default:()=>0}[this.selectSort||"default"];t=t.filter(e).sort(i)}else t=this.products}finally{
//! 無法在 computed 屬性中使用了副作用
this.isLoading_big=!1}return t}},methods:{handleScroll(){window.scrollY>this.products_list-300&&
//!
this.pushProducts()},getProducts(t=1){const e=`https://vue3-course-api.hexschool.io/api/william-api/products/?page=${t}`;this.isLoading=!0,this.isLoading_big=!0,this.emitter.emit("customEvent_isLoading_big",this.isLoading_big),this.$http.get(e).then((t=>{this.isLoading=!1,this.isLoading_big=!1,this.emitter.emit("customEvent_isLoading_big",this.isLoading_big),t.data.success&&(this.products=t.data.products,this.pagination=t.data.pagination)}))},pushProducts(){
//! 要用this.isLoading阻擋，避免讀取api間隔，持續捲動導致重複讀取資料
if(!this.isLoading&&this.pagination.has_next){this.isLoading=!0,this.page++;const t=`https://vue3-course-api.hexschool.io/api/william-api/products/?page=${this.page}`;this.$http.get(t).then((t=>{t.data.success&&(this.pagination=t.data.pagination,this.products=this.products.concat(t.data.products),
//! 成功讀取分頁數後，才能關閉載入，進行下次資料儲存，否則會重複儲存
this.isLoading=!1)}))}},getProduct(t){
//! 只取一個商品
this.$router.push(`/products-view/products-item/${t}`),this.isLoading=!0,this.isLoading_big=!0,this.emitter.emit("customEvent_isLoading_big",this.isLoading_big);const e=`https://vue3-course-api.hexschool.io/api/william-api/product/${t}`;
//! 要用this.id ，用product.id會錯 ，需分清楚差別
//! 在其他電腦，若先判斷會錯誤
if(this.$http.get(e).then((t=>{if(this.isLoading=!1,this.isLoading_big=!1,this.emitter.emit("customEvent_isLoading_big",this.isLoading_big),t.data.success){this.product=t.data.product,this.emitter.emit("customEvent_getProduct",this.product);const e=document.querySelectorAll(".carousel-item");e.forEach((function(t){t.classList.remove("active")})),e[0].classList.add("active"),window.scrollTo(0,0)}})),JSON.parse(localStorage.getItem("favorite"))){const e=Boolean(-1!==JSON.parse(localStorage.getItem("favorite")).indexOf(t));e?(this.isFavorite=!0,this.emitter.emit("customEvent_isFavorite",this.isFavorite)):(this.isFavorite=!1,this.emitter.emit("customEvent_isFavorite",this.isFavorite))}}}},N=i(89);const U=(0,N.Z)(O,[["render",$],["__scopeId","data-v-462d0e82"]]);var j=U},633:function(t,e,i){i.r(e),i.d(e,{default:function(){return z}});var s=i(3396),a=i(135);const o={class:""},c=(0,s._)("div",{class:"d-flex justify-content-center align-items-center border-3 border-nbaBlue border-top py-5 mt-5",style:{"margin-top":"104px !important"}},[(0,s._)("h2",null,"NEW"),(0,s._)("img",{src:a,height:"80",alt:"NEWlogo",class:""}),(0,s._)("h2",null,"PRODUCTS")],-1),r={class:"container-xxl"},l={class:"row g-5"},n={class:"col-lg-10 mb-5"};function h(t,e,i,a,h,d){const u=(0,s.up)("ProductsSide"),p=(0,s.up)("ProductsList");return(0,s.wg)(),(0,s.iD)("div",o,[c,(0,s._)("div",r,[(0,s._)("main",l,[(0,s.Wm)(u),(0,s._)("section",n,[(0,s.Wm)(p)])])])])}var d=i(9242),u=i(7139);const p={class:"col-lg-2 lh-lg aside sticky-lg-top shadow align-self-start",style:{top:"100px"}},g={class:"my-3"},m={class:"list-unstyled d-flex flex-lg-column justify-content-center my-3"},f=["checked"],v=(0,s._)("label",{for:"all"},[(0,s._)("span",{class:"aside_span"}," － "),(0,s.Uk)(" All ")],-1),_=["id","value"],y=["for"],w=(0,s._)("span",{class:"aside_span"}," － ",-1),C=(0,s._)("hr",{class:"py-2"},null,-1),L={class:""},S=(0,s._)("h2",{class:"fs-6"},"PRICE：",-1),k={class:"form-check"},b={class:"form-check-label",for:"2999"},x=(0,s.Uk)(" 0-2999 "),D={class:"form-check"},E={class:"form-check-label",for:"5000"},F=(0,s.Uk)(" 5000+ ");function P(t,e,i,a,o,c){const r=(0,s.up)("multiselect");return(0,s.wg)(),(0,s.iD)("aside",p,[(0,s._)("div",g,[(0,s.Wm)(r,{modelValue:o.cacheSearch,"onUpdate:modelValue":e[0]||(e[0]=t=>o.cacheSearch=t),options:o.options,"custom-label":c.nameWithLang,placeholder:"Select one",label:"title","track-by":"title"},null,8,["modelValue","options","custom-label"])]),(0,s._)("ul",m,[(0,s._)("li",null,[(0,s.wy)((0,s._)("input",{ref:"all",type:"radio",class:"d-none",name:"side",id:"all",value:"","onUpdate:modelValue":e[1]||(e[1]=t=>o.cacheCategory=t),checked:!1===o.cacheCategory},null,8,f),[[d.G2,o.cacheCategory]]),v]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.uniqueCategories,((t,i)=>((0,s.wg)(),(0,s.iD)("li",{key:i},[(0,s.wy)((0,s._)("input",{type:"radio",class:"d-none",name:"side",id:i,value:t,"onUpdate:modelValue":e[2]||(e[2]=t=>o.cacheCategory=t)},null,8,_),[[d.G2,o.cacheCategory]]),(0,s._)("label",{for:i},[w,(0,s.Uk)(" "+(0,u.zw)(t),1)],8,y)])))),128)),C,(0,s._)("li",L,[S,(0,s._)("div",k,[(0,s._)("label",b,[(0,s.wy)((0,s._)("input",{type:"radio",class:"form-check-input","onUpdate:modelValue":e[3]||(e[3]=t=>o.filterCheck=t),name:"filterCheck",id:"2999",value:"2999"},null,512),[[d.G2,o.filterCheck]]),x])]),(0,s._)("div",D,[(0,s._)("label",E,[(0,s.wy)((0,s._)("input",{type:"radio",class:"form-check-input","onUpdate:modelValue":e[4]||(e[4]=t=>o.filterCheck=t),name:"filterCheck",id:"5000",value:"5000"},null,512),[[d.G2,o.filterCheck]]),F])])])])])}i(6699);var $=i(6368),Z={inject:["emitter"],components:{Multiselect:$.ZP},data(){return{products:[],product:{},status:{loadingItem:""},uniqueCategories:[],cacheSearch:"",cacheCategory:"",filterCheck:"",input_all:null,options:[]}},directives:{},created(){this.getProducts()},watch:{cacheSearch(){this.cacheCategory="",this.emitter.emit("customEvent_search",this.cacheSearch.title)},cacheCategory(){this.cacheSearch="",this.filterCheck="",this.emitter.emit("customEvent_category",this.cacheCategory)},filterCheck(){this.emitter.emit("customEvent_Check",this.filterCheck)}},methods:{nameWithLang({title:t}){return`${t}`},getProducts(){const t="https://vue3-course-api.hexschool.io/api/william-api/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.products=t.data.products,this.options=t.data.products,this.isLoading=!1,this.products.forEach((t=>{this.uniqueCategories.includes(t.category)||this.uniqueCategories.push(t.category)}))}))}}},I=i(89);const O=(0,I.Z)(Z,[["render",P]]);var N=O,U=i(2222),j={components:{ProductsSide:N,ProductsList:U.Z}};const q=(0,I.Z)(j,[["render",h]]);var z=q}}]);
//# sourceMappingURL=13.c9b3f48b.js.map