"use strict";(self["webpackChunkhello_world"]=self["webpackChunkhello_world"]||[]).push([[138],{7418:function(t,e,a){var i=a(9806);e["Z"]={inject:["emitter"],mixins:[i.Z],data(){return{qty:1,status:{loadingItem:""},productSize:""}},methods:{addToCart(t,e=1,a){if(this.isLogin)if(this.productSize){this.status.loadingItem=t,this.isLoading=!0;const i="https://vue3-course-api.hexschool.io/api/william-api/cart",s={product_id:t,qty:e};this.$http.post(i,{data:s}).then((t=>{this.isLoading=!1,this.status.loadingItem="",this.$httpMessageState(t,"加入購物車"),this.emitter.emit("customEvent_getCart",this.getCart),a&&(this.$router.push("/cart-view/cart-list"),this.emitter.emit("customEvent_getCart",this.getCart))}))}else this.$swal.fire("Please","Size must be selectd.","warning");else this.$swal.fire("Please"," Sign in or Sign up first.","warning"),this.$router.push("/login")}}}},6019:function(t,e,a){var i=a(9806);e["Z"]={inject:["emitter"],mixins:[i.Z],data(){return{isFavorite:!1,favoriteData:[],checkFavorite:!1}},created(){this.getFavoriteData();//! 用其他電腦，先新增本地陣列
},methods:{updateFavo(t){if(this.isLoading=!0,this.checkFavorite=Boolean(-1!==localStorage.getItem("favorite").indexOf(t)),this.checkFavorite){this.isFavorite=!1,this.emitter.emit("push-message",{style:"danger",title:"移除我的收藏"}),this.favoriteData=JSON.parse(localStorage.getItem("favorite"));const e=this.favoriteData.indexOf(t);e>-1&&(this.favoriteData.splice(e,1),localStorage.setItem("favorite",JSON.stringify(this.favoriteData))),this.isLoading=!1}else this.isFavorite=!0,this.emitter.emit("push-message",{style:"success",title:"加入我的收藏"}),this.favoriteData.push(t),localStorage.setItem("favorite",JSON.stringify(this.favoriteData));this.emitter.emit("customEvent_updateFavorite"),//! 觸發收藏表更新
this.isLoading=!1},getFavoriteData(){if(localStorage.getItem("favorite")){this.favoriteData=JSON.parse(localStorage.getItem("favorite"));const t=Boolean(-1!==JSON.parse(localStorage.getItem("favorite")).indexOf(this.id));this.isFavorite=!!t}else localStorage.setItem("favorite",JSON.stringify(this.favoriteData))}}}},2222:function(t,e,a){a.d(e,{Z:function(){return j}});var i=a(3396),s=a(9242),o=a(7139);const r=t=>((0,i.dD)("data-v-462d0e82"),t=t(),(0,i.Cn)(),t),c={class:""},d={class:"mb-3 d-flex justify-content-end align-items-center"},l=r((()=>(0,i._)("label",{for:"",class:"form-label mb-0"},"Sort by：",-1))),n=(0,i.uE)('<option class="fs-6" value="0" selected data-v-462d0e82>Relevance</option><option class="fs-6" value="AZ" data-v-462d0e82>Name - AZ</option><option class="fs-6" value="ZA" data-v-462d0e82>Name - ZA</option><option class="fs-6" value="Low" data-v-462d0e82>Price - Low to Height</option><option class="fs-6" value="Height" data-v-462d0e82>Price - Height to Low</option>',5),u=[n],p=r((()=>(0,i._)("hr",{class:"py-3"},null,-1))),h={class:"row row-cols-2 row-cols-lg-5 g-4 mb-7",ref:"products_list"},m={class:"col overflow-hidden"},v={class:"card w-100 position-relation newproduct_img","data-num":"1"},g={class:"newproduct_cloth p-1"},f={class:"fw-light",style:{"font-size":"10px"}},_=["onClick"],b={class:"text-white text-center"},y={class:"position-relative border border-white rounded-1 px-2 py-3 bg-transparent d-flex justify-content-around m-2"},w=["onClick"],x=["onClick"],L={key:0,class:"text-center d-flex align-items-center justify-content-center position-absolute top-0 start-0 end-0 bottom-0"},S=r((()=>(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),k=[S],C=["src","alt"],D={class:"text-center"},F={class:"spinner-grow text-warning",role:"status"},O=r((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),E=[O];function I(t,e,a,r,n,S){return(0,i.wg)(),(0,i.iD)("div",c,[(0,i._)("div",d,[l,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>n.selectSort=t),class:"form-select form-select-lg rounded-0 p-1 fs-6",style:{width:"250px"},name:"",id:""},u,512),[[s.bM,n.selectSort]])]),p,(0,i._)("div",h,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(S.filtersData,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"",key:e.id},[(0,i._)("div",m,[(0,i._)("div",v,[(0,i._)("div",g,[(0,i._)("h6",f,(0,o.zw)(e.category),1),(0,i._)("h5",{class:"fs-5 text-center",onClick:t=>S.getProduct(e.id)},(0,o.zw)(e.title),9,_),(0,i._)("h6",b," $ "+(0,o.zw)(t.$filters.currency(e.price)),1),(0,i._)("div",y,[(0,i._)("i",{onClick:a=>t.updateFavo(e.id),class:(0,o.C_)([{"text-danger":-1!==t.favoriteData.indexOf(e.id)},"fa fa-heart fs-4"])},null,10,w),(0,i._)("i",{onClick:a=>t.addToCart(e.id,t.qty,t.isBuy=!1),class:"fa fa-cart-plus text-white fs-4"},null,8,x),n.isLoading?((0,i.wg)(),(0,i.iD)("div",L,k)):(0,i.kq)("",!0)])]),(0,i._)("img",{"data-num":"1",height:"312",width:"312",class:"card-img of-cover op-top",src:e.imageUrl,alt:e.title},null,8,C)])])])))),128))],512),(0,i._)("div",D,[(0,i.wy)((0,i._)("div",F,E,512),[[s.F8,n.isLoading]])])])}a(6699);var z=a(7418),$=a(6019),P={mixins:[z.Z,$.Z],inject:["emitter"],data(){return{products:[],page:1,pagination:{},products_list:0,isLoading:!1,id:"",product:{},cacheSearch:"",cacheCategory:"",filterCheck:"",isFavorite:!1,selectSort:"0"}},mounted(){this.products_list=this.$refs.products_list.offsetHeight,//! 在mounted定義會是零，但不定義會在其他頁報錯
window.addEventListener("scroll",this.handleScroll),this.emitter.on("customEvent_search",(t=>{this.cacheSearch=t})),this.emitter.on("customEvent_category",(t=>{this.cacheCategory=t})),this.emitter.on("customEvent_Check",(t=>{this.filterCheck=t}))},created(){this.getProducts()},computed:{filtersData(){let t=[];this.isLoading_big=!0;try{if(this.$route.path.includes("products-content")){if(t=this.products.filter((t=>(!this.cacheSearch||t.title.toLowerCase().includes(this.cacheSearch.trim().toLowerCase()))&&(!this.cacheCategory||t.category.toLowerCase().includes(this.cacheCategory.trim().toLowerCase())))),0===t.length&&!this.cacheSearch)return this.products;const e={2999:t=>t.price<=2999,5e3:t=>t.price>=5e3,default:()=>!0}[this.filterCheck||"default"],a={Low:(t,e)=>t.price-e.price,Height:(t,e)=>e.price-t.price,AZ:(t,e)=>t.title.localeCompare(e.title),ZA:(t,e)=>e.title.localeCompare(t.title),default:()=>0}[this.selectSort||"default"];t=t.filter(e).sort(a)}else t=this.products}finally{
//! 無法在 computed 屬性中使用了副作用
this.isLoading_big=!1}return t}},methods:{handleScroll(){window.scrollY>this.products_list-300&&
//!
this.pushProducts()},getProducts(t=1){const e=`https://vue3-course-api.hexschool.io/api/william-api/products/?page=${t}`;this.isLoading=!0,this.isLoading_big=!0,this.emitter.emit("customEvent_isLoading_big",this.isLoading_big),this.$http.get(e).then((t=>{this.isLoading=!1,this.isLoading_big=!1,this.emitter.emit("customEvent_isLoading_big",this.isLoading_big),t.data.success&&(this.products=t.data.products,this.pagination=t.data.pagination)}))},pushProducts(){
//! 要用this.isLoading阻擋，避免讀取api間隔，持續捲動導致重複讀取資料
if(!this.isLoading&&this.pagination.has_next){this.isLoading=!0,this.page++;const t=`https://vue3-course-api.hexschool.io/api/william-api/products/?page=${this.page}`;this.$http.get(t).then((t=>{t.data.success&&(this.pagination=t.data.pagination,this.products=this.products.concat(t.data.products),
//! 成功讀取分頁數後，才能關閉載入，進行下次資料儲存，否則會重複儲存
this.isLoading=!1)}))}},getProduct(t){
//! 只取一個商品
this.$router.push(`/products-view/products-item/${t}`),this.isLoading=!0,this.isLoading_big=!0,this.emitter.emit("customEvent_isLoading_big",this.isLoading_big);const e=`https://vue3-course-api.hexschool.io/api/william-api/product/${t}`;
//! 要用this.id ，用product.id會錯 ，需分清楚差別
//! 在其他電腦，若先判斷會錯誤
if(this.$http.get(e).then((t=>{if(this.isLoading=!1,this.isLoading_big=!1,this.emitter.emit("customEvent_isLoading_big",this.isLoading_big),t.data.success){this.product=t.data.product,this.emitter.emit("customEvent_getProduct",this.product);const e=document.querySelectorAll(".carousel-item");e.forEach((function(t){t.classList.remove("active")})),e[0].classList.add("active"),window.scrollTo(0,0)}})),JSON.parse(localStorage.getItem("favorite"))){const e=Boolean(-1!==JSON.parse(localStorage.getItem("favorite")).indexOf(t));e?(this.isFavorite=!0,this.emitter.emit("customEvent_isFavorite",this.isFavorite)):(this.isFavorite=!1,this.emitter.emit("customEvent_isFavorite",this.isFavorite))}}}},N=a(89);const Z=(0,N.Z)(P,[["render",I],["__scopeId","data-v-462d0e82"]]);var j=Z},4138:function(t,e,a){a.r(e),a.d(e,{default:function(){return ct}});var i=a(3396),s=a(7139),o=a(9242);const r=t=>((0,i.dD)("data-v-2d530831"),t=t(),(0,i.Cn)(),t),c={class:""},d={class:"container-xl"},l={"aria-label":"breadcrumb",class:"mt-10"},n={class:"breadcrumb"},u={class:"breadcrumb-item text-nbaBlue"},p=(0,i.Uk)("Home"),h={class:"breadcrumb-item text-nbaBlue"},m=(0,i.Uk)("Product"),v={class:"breadcrumb-item active","aria-current":"page"},g={class:"row row-cols-md-2 g-5 mt-5"},f={id:"carouselExampleIndicators",class:"carousel slide col-md-8","data-bs-ride":"carousel"},_={class:"carousel-indicators"},b=r((()=>(0,i._)("button",{type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide-to":"0",class:"active","aria-current":"true","aria-label":"Slide 1"},null,-1))),y=["data-bs-slide-to","aria-label"],w={class:"carousel-inner"},x={class:"carousel-item active text-center h-100"},L=["src"],S=["src"],k=(0,i.uE)('<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev" data-v-2d530831><span class="carousel-control-prev-icon bg-info p-2 rounded-circle" aria-hidden="true" data-v-2d530831></span><span class="visually-hidden" data-v-2d530831>Previous</span></button><button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next" data-v-2d530831><span class="carousel-control-next-icon bg-info p-2 rounded-circle" aria-hidden="true" data-v-2d530831></span><span class="visually-hidden" data-v-2d530831>Next</span></button>',2),C={class:"col-md-3 d-flex flex-column justify-content-around text-center"},D={class:"mb-5"},F={class:"my-5"},O={class:"d-flex justify-content-center w-50 mx-auto"},E={class:"form-check"},I=r((()=>(0,i._)("label",{style:{cursor:"pointer"},class:"form-check-label border border-secondary text-secondary px-3 py-2",for:"S"}," S ",-1))),z={class:"form-check"},$=r((()=>(0,i._)("label",{style:{cursor:"pointer"},class:"form-check-label border border-secondary text-secondary px-3 py-2",for:"M"}," M ",-1))),P={class:"form-check"},N=r((()=>(0,i._)("label",{style:{cursor:"pointer"},class:"form-check-label border border-secondary text-secondary px-3 py-2",for:"L"}," L ",-1))),Z={class:"form-check slanted-div"},j=r((()=>(0,i._)("label",{style:{cursor:"not-allowed"},disabled:"",class:"form-check-label border border-secondary text-secondary px-3 py-2",for:"XL"}," xL ",-1))),q={class:"d-flex align-items-center justify-content-center gap-3"},U={class:"text-secondary fs-6 text-decoration-line-through fw-lighter"},T={class:"text-center"},A={class:"justify-content-center d-flex align-items-center my-3 gap-5"},J={class:"fs-1 d-flex justify-content-center gap-3 align-items-center"},M=["disabled"],B={class:""},H={class:"d-flex flex-column flex-md-row justify-content-center gap-md-5 mt-5 gap-1"},W=["disabled"],V=r((()=>(0,i._)("hr",{class:"w-100 mx-auto"},null,-1))),Y={class:"my-3 d-flex gap-3 w-100 flex-wrap mx-auto"},G=(0,i.Uk)("Free shipping"),R=(0,i.Uk)("Store pickup"),K=(0,i.Uk)("Fast delivery"),X=(0,i.uE)('<div class="row row-cols-md-2" data-v-2d530831><div class="col-md-8" data-v-2d530831><h3 class="mt-7" data-v-2d530831>DESCRIPTION</h3><hr data-v-2d530831><p class="" data-v-2d530831>Lorem ipsum dolor sit amet consectetur adipisicing elit. Neque minima fugit asperiores repellendus assumenda dolor, nesciunt dolorum! Laboriosam totam rem excepturi rerum libero eos tenetur qui odio nostrum ullam? Omnis.</p><p class="" data-v-2d530831>Lorem ipsum dolor sit amet consectetur adipisicing elit. Neque minima fugit asperiores repellendus assumenda dolor, nesciunt dolorum! Laboriosam totam rem excepturi rerum libero eos tenetur qui odio nostrum ullam? Omnis.</p><h3 class="mt-7" data-v-2d530831>COMMENT</h3><hr data-v-2d530831><div class="d-flex justify-content-start mb-4" data-v-2d530831><div class="img_cont_msg" data-v-2d530831><img src="https://static.turbosquid.com/Preview/001292/481/WV/_D.jpg" class="rounded-circle user_img_msg" data-v-2d530831></div><div class="msg_cotainer" data-v-2d530831> Hi, how are you samim? <span class="msg_time" data-v-2d530831>8:40 AM, Today</span></div></div><div class="card-footer" data-v-2d530831><div class="input-group" data-v-2d530831><textarea name="" class="form-control type_msg" placeholder="Type your message..." data-v-2d530831></textarea><div class="input-group-append bg-white" data-v-2d530831><span class="input-group-text send_btn bg-white" data-v-2d530831><i class="fas fa-location-arrow" data-v-2d530831></i></span></div></div></div></div><div class="col-md-4" data-v-2d530831><div class="accordion d-flex justify-content-center mt-5" id="accordionPanelsStayOpenExample" data-v-2d530831><div class="accordion-item w-100" data-v-2d530831><h2 class="accordion-header" id="panelsStayOpen-headingOne" data-v-2d530831><button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true" aria-controls="panelsStayOpen-collapseOne" data-v-2d530831> DETAILS </button></h2><div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingOne" data-v-2d530831><div class="accordion-body text-start" data-v-2d530831><p class="" data-v-2d530831>規格：</p><p class="" data-v-2d530831>製造日期：</p><p class="" data-v-2d530831>製造地：台灣</p></div></div></div></div></div></div><h3 class="mt-7" data-v-2d530831>RECOMMEND</h3>',2);function Q(t,e,a,r,Q,tt){const et=(0,i.up)("Loading"),at=(0,i.up)("router-link"),it=(0,i.up)("el-tag"),st=(0,i.up)("ProductsList");return(0,i.wg)(),(0,i.iD)("div",c,[(0,i.Wm)(et,{active:Q.isLoading_big},null,8,["active"]),(0,i._)("div",d,[(0,i._)("nav",l,[(0,i._)("ol",n,[(0,i._)("li",u,[(0,i.Wm)(at,{style:{"text-decoration":"none !important"},to:"/"},{default:(0,i.w5)((()=>[p])),_:1})]),(0,i._)("li",h,[(0,i.Wm)(at,{style:{"text-decoration":"none !important"},to:"/products-view/products-content"},{default:(0,i.w5)((()=>[m])),_:1})]),(0,i._)("li",v,(0,s.zw)(Q.product.title),1)])]),(0,i._)("div",g,[(0,i._)("div",f,[(0,i._)("div",_,[b,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Q.product.imagesUrl,((t,e)=>((0,i.wg)(),(0,i.iD)("button",{key:e+1,type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide-to":e+1,class:"","aria-current":"true","aria-label":"Slide "+e+1},null,8,y)))),128))]),(0,i._)("div",w,[(0,i._)("div",x,[(0,i._)("img",{src:Q.product.imageUrl,class:"w-auto h-100",alt:"..."},null,8,L)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Q.product.imagesUrl,((t,e)=>((0,i.wg)(),(0,i.iD)("div",{class:"carousel-item text-center h-100",key:e},[(0,i._)("img",{src:t,class:"w-auto h-100",alt:"..."},null,8,S)])))),128))]),k]),(0,i._)("div",C,[(0,i._)("h1",D,(0,s.zw)(Q.product.title),1),(0,i._)("div",F,[(0,i._)("div",O,[(0,i._)("div",E,[(0,i.wy)((0,i._)("input",{value:"S","onUpdate:modelValue":e[0]||(e[0]=e=>t.productSize=e),class:"form-check-input d-none",type:"radio",name:"size",id:"S"},null,512),[[o.G2,t.productSize]]),I]),(0,i._)("div",z,[(0,i.wy)((0,i._)("input",{value:"M","onUpdate:modelValue":e[1]||(e[1]=e=>t.productSize=e),class:"form-check-input d-none",type:"radio",name:"size",id:"M"},null,512),[[o.G2,t.productSize]]),$]),(0,i._)("div",P,[(0,i.wy)((0,i._)("input",{value:"L","onUpdate:modelValue":e[2]||(e[2]=e=>t.productSize=e),class:"form-check-input d-none",type:"radio",name:"size",id:"L"},null,512),[[o.G2,t.productSize]]),N]),(0,i._)("div",Z,[(0,i.wy)((0,i._)("input",{disabled:"",value:"XL","onUpdate:modelValue":e[3]||(e[3]=e=>t.productSize=e),class:"form-check-input d-none",type:"radio",name:"size",id:"XL"},null,512),[[o.G2,t.productSize]]),j])])]),(0,i._)("div",q,[(0,i._)("small",U,"$ "+(0,s.zw)(t.$filters.currency(Q.product.origin_price)),1),(0,i._)("h2",T,"$ "+(0,s.zw)(t.$filters.currency(Q.product.price)),1)]),(0,i._)("div",A,[(0,i._)("div",J,[(0,i._)("button",{style:{height:"40px"},disabled:1===t.qty,onClick:e[4]||(e[4]=e=>t.qty--),class:"btn btn-outline-secondary py-0"},"-",8,M),(0,i._)("span",B,(0,s.zw)(t.qty),1),(0,i._)("button",{style:{height:"40px"},onClick:e[5]||(e[5]=e=>t.qty++),class:"btn btn-outline-secondary py-0"},"+")]),t.isFavorite?((0,i.wg)(),(0,i.iD)("i",{key:0,onClick:e[6]||(e[6]=t=>tt.updateFavo(Q.product.id)),class:"fa-solid fa-heart fa-beat-fade text-danger fs-3"})):((0,i.wg)(),(0,i.iD)("i",{key:1,onClick:e[7]||(e[7]=t=>tt.updateFavo(Q.product.id)),class:"fa-solid fa-heart-crack fa-shake text-secondary fs-3"}))]),(0,i._)("div",H,[(0,i._)("button",{class:(0,s.C_)(["btn-primary btn",{"btn btn-outline-primary":Q.product.id===t.status.loadingItem}]),onClick:e[8]||(e[8]=e=>t.addToCart(Q.product.id,t.qty,t.isBuy=!1)),disabled:Q.product.id===t.status.loadingItem},"ADD TO CART",10,W),(0,i._)("button",{class:"btn btn-danger",onClick:e[9]||(e[9]=e=>t.addToCart(Q.product.id,t.qty,t.isBuy=!0))},"BUY NOW")]),V,(0,i._)("div",Y,[(0,i.Wm)(it,{class:"fs-6",type:"warning",size:"",effect:"plain",round:""},{default:(0,i.w5)((()=>[G])),_:1}),(0,i.Wm)(it,{class:"fs-6",type:"info",size:"",effect:"plain",round:""},{default:(0,i.w5)((()=>[R])),_:1}),(0,i.Wm)(it,{class:"fs-6",type:"danger",size:"",effect:"plain",round:""},{default:(0,i.w5)((()=>[K])),_:1})])])]),X,(0,i.Wm)(st)])])}var tt=a(2222),et=a(9806),at=a(7418),it=a(6019),st={mixins:[et.Z,at.Z,it.Z],inject:["emitter"],components:{ProductsList:tt.Z},data(){return{product:{},id:"",isLoading_big:!1}},
//! mitt
mounted(){this.emitter.on("customEvent_isLoading_big",(t=>{this.isLoading_big=t})),this.emitter.on("customEvent_getProduct",(t=>{this.product=t})),this.emitter.on("customEvent_isFavorite",(t=>{this.isFavorite=t})),this.emitter.on("customEvent_updateFavorite",(()=>{this.getFavoriteData()}))},created(){this.id=this.$route.params.productId,//! 統一商品唯一的ID(item.id)
this.getProduct(),this.getFavoriteData()},methods:{updateFavo(t){if(this.checkFavorite=Boolean(-1!==localStorage.getItem("favorite").indexOf(t)),this.checkFavorite){this.isFavorite=!1,this.emitter.emit("push-message",{style:"danger",title:"移除我的收藏"}),this.favoriteData=JSON.parse(localStorage.getItem("favorite"));const e=this.favoriteData.indexOf(t);e>-1&&(this.favoriteData.splice(e,1),localStorage.setItem("favorite",JSON.stringify(this.favoriteData)))}else this.isFavorite=!0,this.emitter.emit("push-message",{style:"success",title:"加入我的收藏"}),this.favoriteData.push(t),localStorage.setItem("favorite",JSON.stringify(this.favoriteData));this.emitter.emit("customEvent_updateFavorite")},getProduct(){const t=`https://vue3-course-api.hexschool.io/api/william-api/product/${this.id}`;this.isLoading=!0,this.isLoading_big=!0,this.$http.get(t).then((t=>{this.isLoading=!1,this.isLoading_big=!1,t.data.success&&(this.product=t.data.product)}))}}},ot=a(89);const rt=(0,ot.Z)(st,[["render",Q],["__scopeId","data-v-2d530831"]]);var ct=rt}}]);
//# sourceMappingURL=138.3803d9bb.js.map