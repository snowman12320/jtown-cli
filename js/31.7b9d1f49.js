"use strict";(self["webpackChunkhello_world"]=self["webpackChunkhello_world"]||[]).push([[31],{9108:function(e,t,a){a.d(t,{Z:function(){return f}});var s=a(3396),r=a(9242),i=a(7139);const l={"aria-label":"Page navigation example"},n={class:"pagination justify-content-center"},o={class:"page-item"},d=(0,s._)("span",{"aria-hidden":"true"},"«",-1),c=[d],p=["onClick"],u={class:"page-item"},h=(0,s._)("span",{"aria-hidden":"true"},"»",-1),g=[h];function _(e,t,a,d,h,_){return(0,s.wg)(),(0,s.iD)("nav",l,[(0,s._)("ul",n,[(0,s._)("li",o,[(0,s._)("a",{onClick:t[0]||(t[0]=(0,r.iM)((e=>_.prevPage(a.pages.current_page)),["prevent"])),class:(0,i.C_)([{"text-secondary disabled":!a.pages.has_pre},"page-link"]),href:"#","aria-label":"Previous"},c,2)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.pages.total_pages,(e=>((0,s.wg)(),(0,s.iD)("li",{class:(0,i.C_)(["page-item",{active:e===a.pages.current_page}]),key:e},[(0,s._)("a",{class:"page-link",href:"#",onClick:(0,r.iM)((t=>_.updatePage(e)),["prevent"])},(0,i.zw)(e),9,p)],2)))),128)),(0,s._)("li",u,[(0,s._)("a",{onClick:t[1]||(t[1]=(0,r.iM)((e=>_.nextPage(a.pages.current_page)),["prevent"])),class:(0,i.C_)({"text-secondary disabled":!a.pages.has_next}),href:"#","aria-label":"Next"},g,2)])])])}var m={props:["pages"],methods:{updatePage(e){this.$emit("emit-pages",e)},prevPage(e){this.pages.has_pre&&this.$emit("emit-pages",e-=1)},nextPage(e){this.pages.has_next&&this.$emit("emit-pages",e+=1)}}},w=a(89);const v=(0,w.Z)(m,[["render",_]]);var f=v},31:function(e,t,a){a.r(t),a.d(t,{default:function(){return se}});var s=a(3396);const r={class:"container"},i={class:"row mt-5 gap-3 gap-md-0"};function l(e,t,a,l,n,o){const d=(0,s.up)("memberSide"),c=(0,s.up)("memberOrders");return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",i,[(0,s.Wm)(d,{class:"col-md-2"}),(0,s.Wm)(c,{class:"col-md-10"})])])}var n=a(7139),o=a(9242);const d={class:""},c={class:"p-2 el-autocomplete-list"},p={class:"d-flex justify-content-between"},u={class:"name"},h={class:"name d-md-table-cell d-none"},g={class:"d-flex gap-4"},_={class:"addr text-danger"},m={class:""},w={key:0},v={key:1,class:"text-success"},f={class:"table align-middle"},y=(0,s._)("thead",null,[(0,s._)("th",null,"品名"),(0,s._)("th",null,"數量"),(0,s._)("th",{width:"100",class:"text-start"},"單價")],-1),b={class:"text-start"},x=(0,s._)("td",{colspan:"2",class:"text-end"},"總計",-1),k={class:"text-end"},P={class:"table"},D=(0,s._)("th",{width:"100"},"訂單時間",-1),$=(0,s._)("th",{width:"100"},"Email",-1),z=(0,s._)("th",null,"姓名",-1),L=(0,s._)("th",null,"電話",-1),O=(0,s._)("th",null,"地址",-1),S=(0,s._)("th",null,"付款狀態",-1),C={key:0},A={key:1,class:"text-success"},q={key:0},M=(0,s._)("th",null,"付款時間",-1),W={key:0,class:"text-end"},Z=(0,s._)("button",{class:"btn btn-danger"},"pay now",-1),j=[Z],E={key:1,class:"text-end"},I=(0,s._)("button",{class:"btn btn-outline-primary"},"get other thing!",-1);function V(e,t,a,r,i,l){const Z=(0,s.up)("Loading"),V=(0,s.up)("el-autocomplete"),F=(0,s.up)("router-link"),H=(0,s.up)("Pagination");return(0,s.wg)(),(0,s.iD)("div",d,[(0,s.Wm)(Z,{active:i.isLoading},null,8,["active"]),(0,s.Wm)(V,{"popper-class":"my-autocomplete",class:"my-autocomplete-self",modelValue:i.state,"onUpdate:modelValue":t[0]||(t[0]=e=>i.state=e),"fetch-suggestions":l.querySearch,placeholder:"input order ID",onSelect:l.handleSelect},{default:(0,s.w5)((({item:t})=>[(0,s._)("div",c,[(0,s._)("div",p,[(0,s._)("div",u,(0,n.zw)(t.id),1),(0,s._)("div",h,(0,n.zw)(e.$filters.dateAndTime(t.create_at)),1)]),(0,s._)("div",g,[(0,s._)("span",_,"$"+(0,n.zw)(e.$filters.currency(t.total)),1),(0,s._)("div",m,[t.is_paid?((0,s.wg)(),(0,s.iD)("span",v,"付款完成")):((0,s.wg)(),(0,s.iD)("span",w,"尚未付款"))])])])])),_:1},8,["modelValue","fetch-suggestions","onSelect"]),Boolean(0===i.order.length)?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("form",{key:0,class:"w-100 my-5",onSubmit:t[1]||(t[1]=(0,o.iM)((e=>l.payOrder(i.order)),["prevent"]))},[(0,s._)("table",f,[y,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.order.products,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id},[(0,s._)("td",null,(0,n.zw)(t.product.title),1),(0,s._)("td",null,(0,n.zw)(t.qty)+"/"+(0,n.zw)(t.product.unit),1),(0,s._)("td",b,"$ "+(0,n.zw)(e.$filters.currency(Math.round(t.final_total))),1)])))),128))]),(0,s._)("tfoot",null,[(0,s._)("tr",null,[x,(0,s._)("td",k,"$ "+(0,n.zw)(e.$filters.currency(Math.round(i.order.total))),1)])])]),(0,s._)("table",P,[(0,s._)("tbody",null,[(0,s._)("tr",null,[D,(0,s._)("td",null,(0,n.zw)(i.create_at),1)]),(0,s._)("tr",null,[$,(0,s._)("td",null,(0,n.zw)(i.order.user.email),1)]),(0,s._)("tr",null,[z,(0,s._)("td",null,(0,n.zw)(i.order.user.name),1)]),(0,s._)("tr",null,[L,(0,s._)("td",null,(0,n.zw)(i.order.user.tel),1)]),(0,s._)("tr",null,[O,(0,s._)("td",null,(0,n.zw)(i.order.user.address),1)]),(0,s._)("tr",null,[S,(0,s._)("td",null,[i.order.is_paid?((0,s.wg)(),(0,s.iD)("span",A,"付款完成")):((0,s.wg)(),(0,s.iD)("span",C,"尚未付款"))])]),i.order.is_paid?((0,s.wg)(),(0,s.iD)("tr",q,[M,(0,s._)("td",null,(0,n.zw)(i.paid_date),1)])):(0,s.kq)("",!0)])]),!1===i.order.is_paid?((0,s.wg)(),(0,s.iD)("div",W,j)):((0,s.wg)(),(0,s.iD)("div",E,[(0,s.Wm)(F,{to:"/"},{default:(0,s.w5)((()=>[I])),_:1})]))],32)),(0,s.Wm)(H,{pages:i.pagination,onEmitPages:l.getOrders},null,8,["pages","onEmitPages"])])}var F=a(9108),H={components:{Pagination:F.Z},data(){return{orders:[],state:"",pagination:{},isLoading:!1,order:[],paid_date:null,create_at:null}},created(){this.getOrders()},mounted(){},methods:{querySearch(e){const t=this.orders,a=e?this.createFilter(e):t;return a},createFilter(e){return this.orders.filter((t=>t.id.toLowerCase().includes(e.toLowerCase())))},handleSelect(e){this.isLoading=!0;const t=`https://vue3-course-api.hexschool.io/api/william-api/order/${e.id}`;this.$http.get(t).then((e=>{e.data.success&&(this.order=e.data.order,this.paid_date=new Date(1e3*this.order.paid_date).toLocaleString(),this.create_at=new Date(1e3*this.order.create_at).toLocaleString(),this.isLoading=!1,this.querySearch(!1))}))},getOrders(e=1){this.currentPage=e;const t=`https://vue3-course-api.hexschool.io/api/william-api/orders?page=${e}`;this.isLoading=!0,this.$http.get(t,this.tempProduct).then((e=>{this.orders=e.data.orders,this.pagination=e.data.pagination,this.isLoading=!1}))},payOrder(e){const t=`https://vue3-course-api.hexschool.io/api/william-api/pay/${e.id}`;this.$http.post(t).then((t=>{t.data.success&&(this.handleSelect(e),this.getOrders())}))}}},K=a(89);const T=(0,K.Z)(H,[["render",V]]);var U=T;const Y={class:"list-group"},B=(0,s._)("li",{class:"list-group-item d-flex justify-content-between align-items-center"}," Information ",-1),N={class:"list-group-item d-flex justify-content-between align-items-center"},G=(0,s.Uk)(" Order List "),J={class:"badge bg-primary rounded-pill"};function Q(e,t,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("ul",Y,[B,(0,s._)("li",N,[G,(0,s._)("span",J,(0,n.zw)(i.ordersLength),1)])])])}var R={data(){return{ordersLength:null,tempPage:1,ordersAll:[],pagination:{}}},created(){this.getOrders(),this.getOrdersAll()},methods:{getOrders(e=1){this.currentPage=e;const t=`https://vue3-course-api.hexschool.io/api/william-api/orders?page=${e}`;this.$http.get(t,this.tempProduct).then((e=>{this.ordersLength=e.data.orders.length,this.pagination=e.data.pagination}))},getOrdersAll(){const e=`https://vue3-course-api.hexschool.io/api/william-api/admin/orders?page=${this.tempPage}`;this.$http.get(e,this.tempProduct).then((e=>{this.ordersAll=this.ordersAll.concat(e.data.orders),this.tempPage<this.pagination.total_pages?(this.tempPage++,this.getOrdersAll(),this.ordersLength=this.ordersAll.length):console.log("getOrdersAll,random success",new Date(1e3*this.ordersAll[11].create_at).toISOString().split("T")[0])}))}}};const X=(0,K.Z)(R,[["render",Q]]);var ee=X,te={components:{memberOrders:U,memberSide:ee}};const ae=(0,K.Z)(te,[["render",l]]);var se=ae}}]);
//# sourceMappingURL=31.7b9d1f49.js.map