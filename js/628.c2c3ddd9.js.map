{"version":3,"file":"js/628.c2c3ddd9.js","mappings":"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","sources":["webpack://hello-world/./src/mixins/addToCart.js","webpack://hello-world/./src/mixins/getFavoriteData.js","webpack://hello-world/./src/components/ProductsList.vue","webpack://hello-world/./src/components/ProductsList.vue?179a"],"sourcesContent":["import loginMixin from './loginMixin';\r\nexport default {\r\n  inject: ['emitter'],\r\n  mixins: [loginMixin],\r\n  data () {\r\n    return {\r\n      qty: 1,\r\n      status: {\r\n        loadingItem: ''\r\n      },\r\n      productSize_list: '',\r\n      productSize_item: ''\r\n    };\r\n  },\r\n  methods: {\r\n    addToCart (id, qty = 1, isBuy) {\r\n      if (!this.isLogin) {\r\n        this.$swal.fire('Please', ' Sign in or Sign up first.', 'warning');\r\n        this.$router.push('/login');\r\n      } else {\r\n        if (!this.productSize_list && !this.productSize_item) {\r\n          this.$swal.fire('Please', 'Size must be selectd.', 'warning');\r\n        } else {\r\n          this.status.loadingItem = id;\r\n          this.isLoading = true;\r\n          const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n          const cart = {\r\n            product_id: id,\r\n            qty\r\n          };\r\n          this.$http.post(url, { data: cart }).then((response) => {\r\n            this.isLoading = false;\r\n            this.status.loadingItem = '';\r\n            // this.$httpMessageState(response, '加入購物車');\r\n            this.$toast('success', 'add to cart.');\r\n            this.emitter.emit('customEvent_getCart', this.getCart);\r\n            if (isBuy) {\r\n              this.$router.push('/cart-view/cart-list');\r\n              // *觸發該頁函式，讓下一頁資料更新\r\n              this.emitter.emit('customEvent_getCart', this.getCart);\r\n            }\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n","import loginMixin from './loginMixin';\r\nexport default {\r\n  inject: ['emitter'],\r\n  mixins: [loginMixin],\r\n  data () {\r\n    return {\r\n      isFavorite: false,\r\n      favoriteData: [],\r\n      checkFavorite: false\r\n    };\r\n  },\r\n  created () {\r\n    this.getFavoriteData(); //! 用其他電腦，先新增本地陣列\r\n  },\r\n  methods: {\r\n    updateFavo (id) {\r\n      this.isLoading = true;\r\n      this.checkFavorite = Boolean(\r\n        localStorage.getItem('favorite').indexOf(id) !== -1\r\n      ); //* 搜尋目標\r\n      if (this.checkFavorite) {\r\n        //* 存在就刪除\r\n        this.isFavorite = false; //* 改成無收藏按鈕\r\n        // this.emitter.emit('push-message', {\r\n        //   style: 'danger',\r\n        //   title: '移除我的收藏'\r\n        // });\r\n        this.$toast('success', 'delete favorite.');\r\n        // 刪除\r\n        this.favoriteData = JSON.parse(localStorage.getItem('favorite'));\r\n        // console.log(this.favoriteData);\r\n        const index = this.favoriteData.indexOf(id);\r\n        // console.log(index);\r\n        if (index > -1) {\r\n          this.favoriteData.splice(index, 1);\r\n          localStorage.setItem('favorite', JSON.stringify(this.favoriteData));\r\n        }\r\n        this.isLoading = false;\r\n      } else {\r\n        //* 不存在就儲存\r\n        this.isFavorite = true; //* 改成收藏按鈕\r\n        // this.emitter.emit('push-message', {\r\n        //   style: 'success',\r\n        //   title: '加入我的收藏'\r\n        // });\r\n        this.$toast('success', 'add to favorite.');\r\n        // 新增\r\n        this.favoriteData.push(id);\r\n        localStorage.setItem('favorite', JSON.stringify(this.favoriteData));\r\n      }\r\n      this.emitter.emit('customEvent_updateFavorite'); //! 觸發收藏表更新\r\n      this.isLoading = false;\r\n    },\r\n    getFavoriteData () {\r\n      // localStorage.clear();\r\n      if (localStorage.getItem('favorite')) {\r\n        this.favoriteData = JSON.parse(localStorage.getItem('favorite'));\r\n        const checkFavorite = Boolean(\r\n          JSON.parse(localStorage.getItem('favorite')).indexOf(this.id) !== -1\r\n        ); //* 搜尋目標\r\n        if (checkFavorite) {\r\n          this.isFavorite = true;\r\n        } else {\r\n          this.isFavorite = false;\r\n        }\r\n      } else {\r\n        localStorage.setItem('favorite', JSON.stringify(this.favoriteData));\r\n      }\r\n    }\r\n  }\r\n};\r\n","<template>\r\n  <div class=\"\">\r\n    <!-- 排序  -->\r\n    <div class=\"mb-3 d-flex justify-content-end align-items-center\" :class=\"customClass\">\r\n      <label for=\"\" class=\"form-label mb-0\">Sort by：</label>\r\n      <select v-model=\"selectSort\" class=\"form-select form-select-lg rounded-0 p-1 fs-6\" style=\"width:250px\" name=\"\"\r\n        id=\"\">\r\n        <option class=\"fs-6\" value=\"0\" selected>Relevance</option>\r\n        <option class=\"fs-6\" value=\"AZ\">Name - AZ</option>\r\n        <option class=\"fs-6\" value=\"ZA\">Name - ZA</option>\r\n        <option class=\"fs-6\" value=\"Low\">Price - Low to Height</option>\r\n        <option class=\"fs-6\" value=\"Height\">Price - Height to Low</option>\r\n      </select>\r\n    </div>\r\n    <hr class=\"py-3\">\r\n    <div class=\"row row-cols-2 row-cols-lg-5 g-4 mb-7\" ref=\"products_list\">\r\n      <div class=\"\" v-for=\"(item, index) in filtersData\" :key=\"item.id\">\r\n        <div class=\"col overflow-hidden\">\r\n          <div class=\"card w-100 position-relation newproduct_img\" :class=\"{ 'overflow-hidden': setClass === index }\"\r\n            data-num=\"1\">\r\n            <div class=\"newproduct_cloth p-1 \" ref=\"newproduct_cloth\"\r\n              :class=\"{ 'newproduct_cloth_set': setClass === index }\">\r\n              <h6 class=\"  fw-light\" style=\"font-size:10px\"> {{ item.category }}</h6>\r\n              <h5 class=\"fs-5 text-center\" @click=\"getProduct(item.id)\">\r\n                {{ item.title }}</h5>\r\n              <h6 class=\"text-white text-center\">\r\n                $ {{ $filters.currency(item.price) }}\r\n              </h6>\r\n              <!--  -->\r\n              <div\r\n                class=\"position-relative border border-white rounded-1 px-2 py-3 bg-transparent d-flex justify-content-around m-2\">\r\n                <i @click=\"updateFavo(item.id)\" :class=\"{ 'text-danger': favoriteData.indexOf(item.id) !== -1 }\"\r\n                  class=\"fa fa-heart fs-4\"></i>\r\n                <!--  -->\r\n                <el-popover placement=\"top\" title=\"SIZE：\" :width=\"200\" trigger=\"hover\" content=\"\" @hide=\"setClass = false\"\r\n                  @show=\"setClass = index\">\r\n                  <div class=\"d-flex justify-content-center w-100 mx-auto gap-1 \">\r\n                    <div class=\"\">\r\n                      <input value=\"S\" v-model=\"productSize_list\" class=\"form-check-input d-none\" type=\"radio\" name=\"size\"\r\n                        id=\"list_S\">\r\n                      <label style=\"cursor: pointer\" :class=\"{ 'bg-black text-white': productSize_list === 'S' }\"\r\n                        class=\"form-check-label border border-secondary text-secondary fs-6 px-2 py-1\" for=\"list_S\">\r\n                        S\r\n                      </label>\r\n                    </div>\r\n                    <div class=\"\">\r\n                      <input value=\"M\" v-model=\"productSize_list\" class=\"form-check-input d-none\" type=\"radio\" name=\"size\"\r\n                        id=\"list_M\">\r\n                      <label style=\"cursor: pointer\" :class=\"{ 'bg-black text-white': productSize_list === 'M' }\"\r\n                        class=\"form-check-label border border-secondary text-secondary fs-6 px-2 py-1\" for=\"list_M\">\r\n                        M\r\n                      </label>\r\n                    </div>\r\n                    <div class=\"\">\r\n                      <input value=\"L\" v-model=\"productSize_list\" class=\"form-check-input d-none\" type=\"radio\" name=\"size\"\r\n                        id=\"list_L\">\r\n                      <label style=\"cursor: pointer\" :class=\"{ 'bg-black text-white': productSize_list === 'L' }\"\r\n                        class=\"form-check-label border border-secondary text-secondary fs-6 px-2 py-1\" for=\"list_L\">\r\n                        L\r\n                      </label>\r\n                    </div>\r\n                    <div class=\" slanted-div\">\r\n                      <input disabled value=\"XL\" v-model=\"productSize_list\" class=\"form-check-input d-none\" type=\"radio\"\r\n                        name=\"size\" id=\"list_XL\">\r\n                      <label style=\"  cursor: not-allowed;\" disabled\r\n                        class=\"form-check-label border border-secondary text-secondary fs-6 px-2 py-1\" for=\"list_XL\">\r\n                        xL\r\n                      </label>\r\n                    </div>\r\n                  </div>\r\n                  <template #reference>\r\n                    <i @click=\"addToCart(item.id, qty, isBuy = false)\" class=\"fa fa-cart-plus text-white fs-4\"></i>\r\n                  </template>\r\n                </el-popover>\r\n                <!--  -->\r\n                <div v-if=\"isLoading\"\r\n                  class=\"text-center d-flex align-items-center justify-content-center  position-absolute top-0 start-0 end-0 bottom-0\">\r\n                  <div class=\"spinner-border text-primary \" role=\"status\">\r\n                    <span class=\"visually-hidden \">Loading...</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <img data-num=\"1\" height=\"312\" width=\"312\" class=\"card-img of-cover op-top\" :src=\"item.imageUrl\"\r\n              :alt=\"item.title\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!--  -->\r\n    <div class=\"text-center\">\r\n      <div v-show=\"isLoading\" class=\"spinner-grow text-warning \" role=\"status\">\r\n        <span class=\"visually-hidden\">Loading...</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport addToCart from '../mixins/addToCart';\r\nimport getFavoriteData from '../mixins/getFavoriteData';\r\n\r\nexport default {\r\n  mixins: [addToCart, getFavoriteData],\r\n  inject: ['emitter'],\r\n  data () {\r\n    return {\r\n      products: [], //* 原始資料\r\n      Filtered: [], //! 搜尋全域的資料\r\n      page: 1,\r\n      pagination: {},\r\n      products_list: 0,\r\n      isLoading: false,\r\n      id: '',\r\n      product: {},\r\n      cacheSearch: '',\r\n      cacheCategory: '',\r\n      filterCheck: '',\r\n      isFavorite: false,\r\n      selectSort: '0',\r\n      setClass: false\r\n    };\r\n  },\r\n  // props: { filtersData: { type: Array } }, //! 不能重複宣告\r\n  props: ['customClass'],\r\n  mounted () {\r\n    this.products_list = this.$refs.products_list.offsetHeight; //! 在mounted定義會是零，但不定義會在其他頁報錯\r\n    window.addEventListener('scroll', this.handleScroll); //* 監聽滾動事件\r\n    this.emitter.on('customEvent_search', (data) => {\r\n      this.cacheSearch = data;\r\n      // console.log(this.cacheSearch);\r\n    });\r\n    this.emitter.on('customEvent_category', (data) => {\r\n      this.cacheCategory = data;\r\n      // console.log(this.cacheCategory);//*檢視emitter有無觸發\r\n      this.cacheSearch = '';\r\n    });\r\n    this.emitter.on('customEvent_Check', (data) => {\r\n      this.filterCheck = data;\r\n    });\r\n  },\r\n  created () {\r\n    this.cacheSearch = this.$route.params.search;\r\n    this.getProducts();\r\n    this.getFiltered();//! 取得全域搜尋資料\r\n  },\r\n  computed: {\r\n    filtersData () {\r\n      let filteredData = [];\r\n      // eslint-disable-next-line vue/no-side-effects-in-computed-properties\r\n      this.isLoading_big = true;\r\n\r\n      try {\r\n        if (!this.$route.path.includes('products-content') && !this.$route.path.includes('products-item')) {\r\n          filteredData = this.products;\r\n        } else {\r\n          filteredData = this.Filtered.filter((item) =>\r\n            (!this.cacheSearch || item.title.toLowerCase().includes(this.cacheSearch.trim().toLowerCase())) &&\r\n          (!this.cacheCategory || item.category.toLowerCase().includes(this.cacheCategory.trim().toLowerCase()))\r\n          );\r\n\r\n          if (filteredData.length === 0) {\r\n            filteredData = this.products;\r\n          }\r\n          // !當無搜尋時就使用第一頁資料，在有搜尋時就使用全部資料，才不會一開始就渲染全部\r\n          if (!this.cacheCategory && !this.cacheSearch) {\r\n            filteredData = this.products;\r\n          }\r\n\r\n          const filterFunc = {\r\n            2999: item => item.price <= 2999,\r\n            5000: item => item.price >= 5000,\r\n            default: () => true\r\n          }[this.filterCheck || 'default'];\r\n\r\n          const sortFunc = {\r\n            Low: (a, b) => a.price - b.price,\r\n            Height: (a, b) => b.price - a.price,\r\n            AZ: (a, b) => a.title.localeCompare(b.title),\r\n            ZA: (a, b) => b.title.localeCompare(a.title),\r\n            default: () => 0\r\n          }[this.selectSort || 'default'];\r\n\r\n          filteredData = filteredData.filter(filterFunc).sort(sortFunc);\r\n        }\r\n      } finally {\r\n        //! 無法在 computed 屬性中使用了副作用 (想嘗試改變 isLoading_big 時機)\r\n        // eslint-disable-next-line vue/no-side-effects-in-computed-properties\r\n        this.isLoading_big = false;\r\n      }\r\n\r\n      return filteredData;\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    handleScroll () {\r\n      // this.products_list = this.$refs.products_list.offsetHeight; //! 這邊定義會在切換router時，取不到dom（生命週期沒有重整吧）\r\n      if (window.scrollY > this.products_list - 300) {\r\n        //!\r\n        this.pushProducts();\r\n      }\r\n    },\r\n    getFiltered () {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\r\n      this.$http.get(api).then((res) => {\r\n        if (res.data.success) {\r\n          this.Filtered = res.data.products;\r\n        }\r\n      });\r\n    },\r\n    getProducts (page = 1) {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/?page=${page}`;\r\n      this.isLoading = true;\r\n      this.isLoading_big = true;\r\n      this.emitter.emit('customEvent_isLoading_big', this.isLoading_big);\r\n      this.$http.get(api).then((res) => {\r\n        this.isLoading = false;\r\n        this.isLoading_big = false;\r\n        this.emitter.emit('customEvent_isLoading_big', this.isLoading_big);\r\n        if (res.data.success) {\r\n          this.products = res.data.products;\r\n          this.pagination = res.data.pagination;\r\n        }\r\n      });\r\n    },\r\n    //* 捲動更新\r\n    // 將新數據合併到舊數據時，可以使用 concat 方法代替 new Set，避免重複儲存，也不用push推新的陣列物件進去，這樣會有兩個陣列物件，會無法迴圈\r\n    pushProducts () {\r\n      //! 要用this.isLoading阻擋，避免讀取api間隔，持續捲動導致重複讀取資料\r\n      if (!this.isLoading && this.pagination.has_next) {\r\n        this.isLoading = true;\r\n        // if (this.pagination.has_next) {\r\n        // console.log(this.pagination);\r\n        this.page++;\r\n        const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/?page=${this.page}`;\r\n        this.$http.get(api).then((res) => {\r\n          if (res.data.success) {\r\n            this.pagination = res.data.pagination;\r\n            // console.log(this.pagination);\r\n            this.products = this.products.concat(res.data.products);\r\n            // console.log(this.products);\r\n            //! 成功讀取分頁數後，才能關閉載入，進行下次資料儲存，否則會重複儲存\r\n            this.isLoading = false;\r\n          }\r\n        });\r\n        // }\r\n      }\r\n    },\r\n    getProduct (id) { //! 只取一個商品\r\n      this.$router.push(`/products-view/products-item/${id}`);\r\n      this.isLoading = true;\r\n      this.isLoading_big = true;\r\n      this.emitter.emit('customEvent_isLoading_big', this.isLoading_big);\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${id}`;\r\n      this.$http.get(api).then((res) => {\r\n        this.isLoading = false;\r\n        this.isLoading_big = false;\r\n        this.emitter.emit('customEvent_isLoading_big', this.isLoading_big);\r\n        if (res.data.success) {\r\n          this.product = res.data.product;\r\n          this.emitter.emit('customEvent_getProduct', this.product);\r\n          // 取得所有的carousel-item元素，移除所有carousel-item元素的active類別\r\n          const carouselItems = document.querySelectorAll('.carousel-item');\r\n          carouselItems.forEach(function (item) {\r\n            item.classList.remove('active');\r\n          });\r\n          carouselItems[0].classList.add('active');\r\n          window.scrollTo(0, 0);\r\n        }\r\n      });\r\n      // 確認收藏狀態\r\n      //! 要用this.id ，用product.id會錯 ，需分清楚差別\r\n      //! 在其他電腦，若先判斷會錯誤\r\n      if (JSON.parse(localStorage.getItem('favorite'))) {\r\n        const checkFavorite = Boolean(JSON.parse(localStorage.getItem('favorite')).indexOf(id) !== -1); //* 搜尋目標\r\n        if (checkFavorite) {\r\n          this.isFavorite = true;\r\n          this.emitter.emit('customEvent_isFavorite', this.isFavorite);\r\n        } else {\r\n          this.isFavorite = false;\r\n          this.emitter.emit('customEvent_isFavorite', this.isFavorite);\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.col h5 {\r\n  cursor: pointer;\r\n}\r\n\r\n.col i {\r\n  cursor: pointer;\r\n}\r\n\r\n.newproduct_cloth_set {\r\n\r\n  opacity: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: end;\r\n  transition: all;\r\n  z-index: 2;\r\n  animation-duration: 500ms;\r\n  overflow: hidden !important;\r\n  border-radius: 3%;\r\n\r\n  &+img {\r\n    transform: scale(1.2);\r\n    border-radius: 3%;\r\n\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./ProductsList.vue?vue&type=template&id=0a9cd63c&scoped=true\"\nimport script from \"./ProductsList.vue?vue&type=script&lang=js\"\nexport * from \"./ProductsList.vue?vue&type=script&lang=js\"\n\nimport \"./ProductsList.vue?vue&type=style&index=0&id=0a9cd63c&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0a9cd63c\"]])\n\nexport default __exports__"],"names":["inject","mixins","loginMixin","data","qty","status","loadingItem","productSize_list","productSize_item","methods","addToCart","id","isBuy","this","isLogin","isLoading","url","cart","product_id","$http","post","then","response","$toast","emitter","emit","getCart","$router","push","$swal","fire","isFavorite","favoriteData","checkFavorite","created","getFavoriteData","updateFavo","Boolean","localStorage","getItem","indexOf","JSON","parse","index","splice","setItem","stringify","class","_createElementVNode","for","_hoisted_3","ref","style","disabled","role","_hoisted_25","_hoisted_30","_createElementBlock","_hoisted_1","$props","_hoisted_2","$data","name","_hoisted_9","_hoisted_10","_Fragment","$options","item","key","_hoisted_11","_hoisted_12","category","onClick","title","_hoisted_14","_ctx","currency","price","_hoisted_15","_createVNode","_component_el_popover","placement","width","trigger","content","onHide","onShow","reference","_hoisted_17","_hoisted_18","value","type","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_24","height","src","imageUrl","alt","_hoisted_28","_hoisted_29","products","Filtered","page","pagination","products_list","product","cacheSearch","cacheCategory","filterCheck","selectSort","setClass","props","mounted","$refs","offsetHeight","window","addEventListener","handleScroll","on","$route","params","search","getProducts","getFiltered","computed","filtersData","filteredData","isLoading_big","path","includes","filter","toLowerCase","trim","length","filterFunc","default","sortFunc","Low","a","b","Height","AZ","localeCompare","ZA","sort","scrollY","pushProducts","api","get","res","success","has_next","concat","getProduct","carouselItems","document","querySelectorAll","forEach","classList","remove","add","scrollTo","__exports__","render"],"sourceRoot":""}